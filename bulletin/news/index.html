<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News</title>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="stylesheet" href="/styles/news.css">
    <link rel="icon" type="image/x-icon" href="/img/favicon.ico">
    <script src="/js/main.js" defer></script>
</head>

<body>
    <div class="wrapper">
        <div id="content">
            <div id="back"><a href="/bulletin/">back to bulletin</a></div>
            <h1>News</h1>
            <p>All the updates you need >:D</p>
            <main>
                <ul id="updateslist">

                </ul>
            </main>
        </div>
        <div id="sidebar">
            <h3>Quick Nav</h3>
            <p>Recent Pages</p>
            <ul id="recentPages">
                <li><a href="#">link</a></li>
            </ul>
            <hr>
            <p>Sitemap</p>
            <ul id="sitemap" class="sitemap short">
            </ul>
            <a href="/page/info/sitemap/">full sitemap</a>
        </div>
    </div>
<script>
const updateslist = document.getElementById("updateslist");
const updatesArray = [];

async function loadUpdates() {
    try {
        const response = await fetch('/bulletin/updates.json');
        const updates = await response.json();

        console.log("Raw JSON:", updates);

        for (const update of updates) {
            const { title, date, content } = update;
            updatesArray.push({ title, date, content });
        }

        console.log("Processed updatesArray:", updatesArray);

        updatesArray.slice().reverse().forEach(Object => {
            const li = document.createElement('li');
            li.className = 'update';
            li.innerHTML = `<p class="updatetitle">${Object.title}</p><p class="date">${Object.date}</p><p class="content">${Object.content}</p>`;
            updateslist.appendChild(li);
        });


    } catch (err) {
        console.error('Error loading updates:', err);
    }
}

// Call the function
loadUpdates();

</script>
</body>
</html>